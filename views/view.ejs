<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/style.css">
    <script src="app.js"></script>
    <title>View</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<%- include('./partials/navbar.ejs')  %>    
<div class="mx-5">
    <h3 class="pt-20 mb-4 space-x-1 text-2xl font-medium text-gray-800"><%= data.judulFoto %></h3>
    <p class="mb-4 space-x-1 text-sm font-medium text-gray-800"><%= data.deskripsiFoto%></p>
    <img src="/imgUpload/<%= data.lokasiFile %>" alt="<%= data.judulFoto %>" class="gambar"></a>

    <div class="rpl2">
        <form action="/like" method="POST">
          <input type="hidden" name="fotoID" value="<%= data._id %>">
            <button class="tombolLike" type="submit">
              <?xml version="1.0" encoding="UTF-8"?><svg width="24px" height="24px" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" color="#000000"><path d="M16.4724 20H4.1C3.76863 20 3.5 19.7314 3.5 19.4V9.6C3.5 9.26863 3.76863 9 4.1 9H6.86762C7.57015 9 8.22116 8.6314 8.5826 8.02899L11.293 3.51161C11.8779 2.53688 13.2554 2.44422 13.9655 3.33186C14.3002 3.75025 14.4081 4.30635 14.2541 4.81956L13.2317 8.22759C13.1162 8.61256 13.4045 9 13.8064 9H18.3815C19.7002 9 20.658 10.254 20.311 11.5262L18.4019 18.5262C18.1646 19.3964 17.3743 20 16.4724 20Z" stroke="#000000" stroke-width="1.5" stroke-linecap="round"></path><path d="M7 20L7 9" stroke="#000000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>
              <!-- Menampilkan jumlah likes -->
              <% if (like && like.length > 0) { %>
                <h3 class=""><%= like.length %></h3>
              <% } %>
      
              
      
          </button>
        </form>
        
      </div>
      
      
      
      <h4 class="pt-4">Tinggalkan Komentar</h4>
      
          <form action="/komentar" method="POST">
            <input type="hidden" name="fotoID" value="<%= data._id %>">
            <textarea class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" id="isiKomentar" name="isiKomentar" rows="4" required></textarea>
              <button class="bg-green-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded" type="submit">Kirim</button>
          </form> 
          
          <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;700&display=swap">
          <% if (komen && komen.length > 0) { %>
            <h3 class="mb-4 pt-5 space-x-1 text-2xl font-medium text-gray-800">Komentar (<%= komen.length %>)</h3>
            <% komen.forEach(comment => { %>
              <div class="comment">
                <div class="grid">
                  <p class="pt-4 mb-2 space-x-1 text-large font-semibold text-gray-800"><%= comment.userID.username %></p>
                  <p class="mb-4 space-x-1 text-large text-gray-800"><%= comment.isiKomentar %></p>
                </div>
                <p class="mb-4 space-x-1 text-large text-blue-800"><%= comment.tanggalKomentar.toDateString() %></p>
                <form action="/komentar-delete/<%= comment._id %>?_method=DELETE" method="POST">
                  <input class="mb-4 space-x-1 text-large text-gray-800 hover:text-red-500" type="submit" value="Delete" class="btn-delete btn">
                  </form>
                  <hr>
              </div>
            <% }); %>
          <% } else { %>
            <p>Tidak ada komentar.</p>
          <% } %>
          
        </div>   
</html>